# Claude Code 記憶系統使用指南

## 系統概述

Claude Code 記憶系統基於標準的 `CLAUDE.md` 檔案，為 AI 助手提供持續的專案上下文。與 Kiro 的 steering 機制不同，Claude Code 會在每次會話開始時自動讀取 `CLAUDE.md` 檔案，確保 AI 助手了解專案的完整狀況。

## 檔案結構

```
├── CLAUDE.md                    # 主記憶檔案 (Claude Code 自動讀取)
├── .claude-backups/             # 備份目錄
│   ├── README.md               # 本使用指南
│   └── CLAUDE-YYYY-MM-DD.md    # 自動備份檔案
└── scripts/
    └── claude-memory-manager.js # 記憶管理工具
```

## 核心功能

### 1. 自動記憶載入

- Claude Code 啟動時自動讀取 `CLAUDE.md`
- AI 助手立即獲得專案完整上下文
- 無需手動載入，seamless 的知識傳承

### 2. 結構化記憶管理

`CLAUDE.md` 包含以下主要區段：

- **專案概述**: 基本資訊和技術棧
- **重要開發指令**: 常用的開發和建置命令
- **專案結構**: 目錄和檔案組織說明
- **重要配置設定**: Hugo 和服務配置
- **常用操作與解決方案**: 故障排除和最佳實踐
- **內容管理**: 文章和資源管理規範
- **待辦事項**: 短期和長期目標追蹤

### 3. 便捷的管理工具

提供多種腳本來管理記憶檔案：

```bash
# 互動式記憶管理
npm run claude:memory

# 快速備份
npm run claude:backup

# 查看狀態
npm run claude:status
```

## 使用方法

### 日常開發流程

1. **開啟 Claude Code**: 系統自動讀取 `CLAUDE.md`，AI 助手獲得專案上下文
2. **正常開發**: AI 助手會參考記憶內容提供精準建議
3. **遇到問題**: 查詢記憶檔案中的解決方案
4. **學到新知識**: 使用管理工具更新記憶檔案

### 記憶更新操作

#### 使用互動式工具

```bash
npm run claude:memory
```

提供以下選項：

- 新增開發指令
- 新增解決方案
- 新增待辦事項
- 更新配置資訊
- 查看狀態
- 建立備份

#### 手動編輯

直接編輯 `CLAUDE.md` 檔案：

1. 找到相應區段
2. 按照既有格式添加內容
3. 保存檔案
4. 下次 Claude Code 會話自動載入

### 備份管理

#### 自動備份

- 管理工具會在更新前自動建立備份
- 備份檔案存放在 `.claude-backups/` 目錄

#### 手動備份

```bash
# 建立當日備份
npm run claude:backup

# 查看備份狀態
ls .claude-backups/
```

## 最佳實踐

### 內容組織原則

- **保持結構一致**: 遵循 `CLAUDE.md` 的既定格式
- **使用清晰標題**: 便於 AI 快速定位資訊
- **簡潔明確**: 避免冗餘，確保資訊精準
- **定期更新**: 保持內容新鮮和相關性

### 更新頻率建議

- **即時記錄**: 重要決策和解決方案立即添加
- **每週檢視**: 更新待辦事項和近期學習
- **每月整理**: 歸檔過時內容，更新專案狀態
- **重大變更**: 技術棧或配置變更立即更新

### 版本控制策略

- 將 `CLAUDE.md` 納入 Git 版本控制
- 定期提交記憶更新
- 使用有意義的提交訊息
- 必要時可回溯歷史版本

## 進階技巧

### 記憶檔案優化

- **控制檔案大小**: 建議保持在 50KB 以內
- **使用連結**: 對於詳細文件，使用外部連結
- **分層資訊**: 重要資訊在前，詳細資訊在後
- **標籤化**: 使用標籤便於分類和搜尋

### 協作開發

- **團隊共識**: 確保所有開發者遵循相同格式
- **變更通知**: 重大記憶更新時通知團隊
- **定期檢視**: 團隊定期檢視和更新記憶內容
- **責任分工**: 指定專人維護特定區段

### 與其他系統整合

- **CI/CD**: 可整合到部署流程中驗證記憶檔案
- **文件系統**: 與專案文件保持同步
- **監控工具**: 追蹤記憶檔案的使用和效果

## 常見問題

### Q: CLAUDE.md 沒有被 Claude Code 讀取？

A: 確保檔案位於專案根目錄，檔名為 `CLAUDE.md`，格式為有效的 Markdown。

### Q: 記憶檔案太大怎麼辦？

A: 考慮將詳細內容移到外部文件，在 CLAUDE.md 中保留摘要和連結。

### Q: 如何恢復誤刪的內容？

A: 使用 `.claude-backups/` 中的備份檔案，或透過 Git 歷史恢復。

### Q: 多人協作時如何避免衝突？

A: 建立變更規範，重要更新前先拉取最新版本，使用有意義的提交訊息。

## 系統維護

### 定期檢查清單

- [ ] 檢查備份目錄大小，清理過期備份
- [ ] 驗證外部連結有效性
- [ ] 更新過時的配置資訊
- [ ] 檢查待辦事項完成狀況
- [ ] 確認記憶檔案格式正確性

### 效能優化

- 保持記憶檔案精簡
- 定期歸檔歷史內容
- 使用外部連結減少檔案大小
- 優化 Markdown 格式提升讀取速度

---

這個記憶系統將隨著專案發展持續演進，確保 Claude Code 始終擁有最新、最準確的專案知識。
