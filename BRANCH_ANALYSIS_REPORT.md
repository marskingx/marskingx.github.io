# åˆ†æ”¯å·®ç•°åˆ†æå ±å‘Š

## ğŸ“‹ ç¸½è¦½

**ç•¶å‰åˆ†æ”¯**: `feature/hugo-upgrade-148.2`  
**å°æ¯”åˆ†æ”¯**: `main`  
**åˆ†ææ—¥æœŸ**: 2025-08-21

---

## ğŸ¯ é—œéµç™¼ç¾

### âœ… ç•¶å‰åˆ†æ”¯çš„å„ªå‹¢

#### 1. **Hugo å‡ç´š** (ğŸŒŸ ç¨æœ‰)
- âœ… å·²å‡ç´šåˆ° Hugo v0.148.2 Extended
- âœ… ä¿®å¾©æ‰€æœ‰ç ´å£æ€§è®Šæ›´
- âœ… æ–°å¢å®‰å…¨ç­–ç•¥é…ç½®
- âœ… å»ºç½®å’Œç¶²ç«™å•Ÿå‹•æ­£å¸¸

#### 2. **ç¾ä»£åŒ–é›»å­å ±è¨‚é–±ç³»çµ±** (ğŸŒŸ æ¨è–¦ä¿ç•™)
- âœ… æ¼‚äº®çš„æ¼¸å±¤è¨­è¨ˆå’Œç¾ä»£åŒ– UI
- âœ… è¤‡é›œçš„è§¸ç™¼æ©Ÿåˆ¶ï¼ˆæ™‚é–“+æ»¾å‹•+é€€å‡ºæ„åœ–ï¼‰
- âœ… Google Analytics å®Œæ•´æ•´åˆ
- âœ… æ™ºæ…§å‹é¡¯ç¤ºé‚è¼¯ï¼ˆå†·å»æœŸã€æ¬¡æ•¸æ§åˆ¶ï¼‰
- âœ… å®Œæ•´çš„æ·±è‰²æ¨¡å¼æ”¯æ´
- âœ… æµæš¢çš„å‹•ç•«æ•ˆæœ

#### 3. **å¤šèªè¨€é…ç½®** (ğŸŒŸ å·²å®Œæ•´)
- âœ… å®Œæ•´çš„ `languages.toml` é…ç½®
- âœ… ç¹é«”ä¸­æ–‡ + è‹±æ–‡æ”¯æ´
- âœ… ç¨ç«‹çš„é¸å–®é…ç½®æ–‡ä»¶

### âŒ ç•¶å‰åˆ†æ”¯çš„ç¼ºå¤±

#### 1. **Mailchimp è‡ªå‹•åŒ–ç³»çµ±** (ç¼ºå¤±)
- âŒ ç¼ºå°‘ `.github/workflows/mailchimp_notification.yml`
- âŒ ç¼ºå°‘ `.github/scripts/mailchimp-notifier.js`
- âŒ ç¼ºå°‘å®Œæ•´çš„é›»å­å ±è‡ªå‹•åŒ–æµç¨‹

#### 2. **ç‰ˆæœ¬ç®¡ç†ç³»çµ±** (ç¼ºå¤±)
- âŒ ç¼ºå°‘ `scripts/version-manager.js`
- âŒ ç¼ºå°‘å››ä½ç‰ˆæœ¬è™Ÿç®¡ç†
- âŒ ç¼ºå°‘ `.version` æª”æ¡ˆ

#### 3. **å…¶ä»–é€²éšåŠŸèƒ½** (ç¼ºå¤±)
- âŒ ç¼ºå°‘å„ç¨® debug å’Œæ¸¬è©¦è…³æœ¬
- âŒ ç¼ºå°‘å®Œæ•´çš„ CI/CD å·¥ä½œæµç¨‹

---

## ğŸ¯ å»ºè­°çš„æ•´åˆç­–ç•¥

### éšæ®µ 1: å»ºç«‹ä¹¾æ·¨çš„åŸºç¤ (é¸é … 2)

```bash
# 1. åŸºæ–¼æœ€æ–° main å‰µå»ºæ–°åˆ†æ”¯
git checkout main
git pull origin main
git checkout -b feature/hugo-upgrade-final

# 2. ä¿å­˜ç•¶å‰åˆ†æ”¯çš„é—œéµæª”æ¡ˆ
# éœ€è¦ä¿ç•™çš„æª”æ¡ˆåˆ—è¡¨å¦‚ä¸‹

```

### éšæ®µ 2: é¸æ“‡æ€§å°å…¥åŠŸèƒ½

#### ğŸŒŸ å„ªå…ˆä¿ç•™ (ä¾†è‡ªç•¶å‰åˆ†æ”¯)
1. **Hugo å‡ç´šç›¸é—œ**:
   - `package.json` (hugo-extended ä¾è³´)
   - `hugo.toml` (å®‰å…¨ç­–ç•¥é…ç½® + permalink ä¿®æ­£)
   - `go.mod` + `go.sum` (æ›´æ–°çš„æ¨¡çµ„)

2. **ç¾ä»£åŒ–é›»å­å ±ç³»çµ±**:
   - `themes/hugoplate/layouts/partials/newsletter-popup.html`
   - ç›¸é—œ CSS å’Œ JavaScript

3. **å¤šèªè¨€é…ç½®**:
   - `config/_default/languages.toml`
   - `config/_default/menus.zh-tw.toml`
   - `config/_default/menus.en.toml`

#### ğŸ”„ å¾ main åˆ†æ”¯å°å…¥
1. **Mailchimp è‡ªå‹•åŒ–ç³»çµ±**:
   - `.github/workflows/mailchimp_notification.yml`
   - `.github/scripts/mailchimp-notifier.js`
   - `.github/scripts/debug-mailchimp.js`
   - `.github/MAILCHIMP_SETUP.md`
   - `.github/MAILCHIMP_USAGE.md`

2. **ç‰ˆæœ¬ç®¡ç†ç³»çµ±**:
   - `scripts/version-manager.js`
   - `.version`
   - æ›´æ–° `package.json` scripts

3. **å…¶ä»–å…§å®¹**:
   - æœ€æ–°çš„éƒ¨è½æ ¼æ–‡ç« 
   - å®Œæ•´çš„æ¸¬è©¦å’Œæ–‡æª”

---

## ğŸ“‹ å…·é«”åŸ·è¡Œæ­¥é©Ÿ

### æ­¥é©Ÿ 1: å‚™ä»½é—œéµæª”æ¡ˆ
```bash
# å‰µå»ºå‚™ä»½ç›®éŒ„
mkdir -p /tmp/hugo-upgrade-backup
cp -r themes/hugoplate/layouts/partials/newsletter-popup.html /tmp/hugo-upgrade-backup/
cp hugo.toml /tmp/hugo-upgrade-backup/
cp package.json /tmp/hugo-upgrade-backup/
cp go.mod /tmp/hugo-upgrade-backup/
cp go.sum /tmp/hugo-upgrade-backup/
cp -r config/_default/ /tmp/hugo-upgrade-backup/config/
```

### æ­¥é©Ÿ 2: å»ºç«‹æ–°åˆ†æ”¯
```bash
git checkout main
git pull origin main
git checkout -b feature/hugo-upgrade-final
```

### æ­¥é©Ÿ 3: æ‡‰ç”¨ Hugo å‡ç´š
```bash
# å®‰è£ Hugo Extended
npm install hugo-extended@^0.148.2 --save-dev

# æ‡‰ç”¨é…ç½®ä¿®æ”¹
# (å¾å‚™ä»½æª”æ¡ˆä¸­é¸æ“‡æ€§å¾©åŸ)
```

### æ­¥é©Ÿ 4: æ•´åˆé›»å­å ±ç³»çµ±
```bash
# ä¿ç•™ç¾ä»£åŒ–è¨­è¨ˆï¼Œä½†æ•´åˆ main åˆ†æ”¯çš„ Mailchimp åŠŸèƒ½
```

### æ­¥é©Ÿ 5: æ¸¬è©¦å’Œé©—è­‰
```bash
# å»ºç½®æ¸¬è©¦
npx hugo

# æœ¬åœ°ä¼ºæœå™¨æ¸¬è©¦
npx hugo server

# åŠŸèƒ½æ¸¬è©¦
```

---

## ğŸ” é¢¨éšªè©•ä¼°

### ğŸŸ¢ ä½é¢¨éšª
- Hugo å‡ç´šå·²ç¶“é©—è­‰æˆåŠŸ
- é›»å­å ± UI è¨­è¨ˆå·²ç¶“å®Œæˆ
- å¤šèªè¨€é…ç½®å·²ç¶“å°±ç·’

### ğŸŸ¡ ä¸­é¢¨éšª
- éœ€è¦æ•´åˆå…©å¥—é›»å­å ±ç³»çµ±
- Mailchimp é…ç½®å¯èƒ½éœ€è¦èª¿æ•´
- ç‰ˆæœ¬ç®¡ç†ç³»çµ±éœ€è¦é‡æ–°è¨­å®š

### ğŸ”´ éœ€æ³¨æ„
- ç¢ºä¿æ‰€æœ‰ Mailchimp API è¨­å®šæ­£ç¢º
- é©—è­‰ç‰ˆæœ¬ç®¡ç†ç³»çµ±ç›¸å®¹æ€§
- æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½æ•´åˆå¾Œæ˜¯å¦æ­£å¸¸

---

## ğŸ¯ æ¨è–¦æ–¹æ¡ˆ

**å»ºè­°åŸ·è¡Œã€Œé¸é … 2 + é¸æ“‡æ€§æ•´åˆã€**ï¼Œå› ç‚ºï¼š

1. âœ… ä¿ç•™æœ€ä½³çš„ Hugo å‡ç´šæˆæœ
2. âœ… ä¿ç•™ç¾ä»£åŒ–çš„é›»å­å ±è¨­è¨ˆ
3. âœ… ç²å¾—å®Œæ•´çš„è‡ªå‹•åŒ–åŠŸèƒ½
4. âœ… é¿å…è¡çªå’Œå•é¡Œ
5. âœ… ç‰ˆæœ¬æ­·å²æ¸…æ™°

é€™å€‹æ–¹æ¡ˆèƒ½ç¢ºä¿æˆ‘å€‘ç²å¾—å…©å€‹åˆ†æ”¯çš„æ‰€æœ‰å„ªé»ï¼ŒåŒæ™‚é¿å…è¤‡é›œçš„åˆä½µè¡çªã€‚

---

**å ±å‘Šå®Œæˆ**: 2025-08-21  
**å»ºè­°åŸ·è¡Œè€…**: Claude Code Assistant
